<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Stream on Nguyễn Xuân Tùng</title>
        <link>http://localhost:1313/tags/stream/</link>
        <description>Recent content in Stream on Nguyễn Xuân Tùng</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language><atom:link href="http://localhost:1313/tags/stream/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Bài viết #2: Luồng (Stream) trong Java - Ống Nước Dẫn Dữ Liệu</title>
        <link>http://localhost:1313/posts/bai-viet-java-so-2/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/posts/bai-viet-java-so-2/</guid>
        <description>&lt;p&gt;Trong bài 1, chúng ta đã nói về Java. Giờ, hãy nói về cách Java &amp;ldquo;nói chuyện&amp;rdquo; với thế giới bên ngoài. Một chương trình không thể tồn tại một mình; nó cần đọc file, ghi dữ liệu ra mạng, nhận input từ người dùng&amp;hellip;&lt;/p&gt;
&lt;p&gt;Tất cả những thứ đó, trong Java, đều được xử lý qua một khái niệm gọi là &lt;strong&gt;Stream (Luồng)&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Hãy tưởng tượng &lt;strong&gt;Stream&lt;/strong&gt; như một &lt;strong&gt;đường ống nước&lt;/strong&gt;. Dữ liệu (data) là nước. Chương trình của bạn có thể là một cái hồ (cần nước vào) hoặc một nhà máy xử lý (cần xả nước ra).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Input Stream (Luồng vào):&lt;/strong&gt; Ống dẫn nước &lt;em&gt;vào&lt;/em&gt; chương trình của bạn (ví dụ: đọc file, nhận dữ liệu từ mạng).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Output Stream (Luồng ra):&lt;/strong&gt; Ống xả nước &lt;em&gt;ra khỏi&lt;/em&gt; chương trình của bạn (ví dụ: ghi file, gửi dữ liệu qua mạng).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;phân-biệt-byte-streams-vs-character-streams&#34;&gt;Phân Biệt: Byte Streams vs. Character Streams
&lt;/h2&gt;&lt;p&gt;Java có 2 loại &amp;ldquo;ống nước&amp;rdquo; chính:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Byte Streams (Luồng Byte):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đây là loại ống cơ bản nhất. Nó vận chuyển dữ liệu &amp;ldquo;thô&amp;rdquo; (dạng &lt;code&gt;byte&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Nó dùng để đọc/ghi &lt;em&gt;bất cứ thứ gì&lt;/em&gt;: file ảnh, file âm thanh, file &lt;code&gt;.exe&lt;/code&gt;, và cả text.&lt;/li&gt;
&lt;li&gt;Tên class thường kết thúc bằng &lt;code&gt;InputStream&lt;/code&gt; (ví dụ: &lt;code&gt;FileInputStream&lt;/code&gt;) và &lt;code&gt;OutputStream&lt;/code&gt; (ví dụ: &lt;code&gt;FileOutputStream&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Character Streams (Luồng Ký Tự):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đây là loại ống &amp;ldquo;thông minh&amp;rdquo; hơn, được tối ưu hóa để vận chuyển &lt;em&gt;văn bản&lt;/em&gt; (text).&lt;/li&gt;
&lt;li&gt;Nó tự động xử lý các vấn đề về mã hóa (encoding) như UTF-8, Unicode, giúp bạn đọc/ghi tiếng Việt (như &amp;lsquo;á&amp;rsquo;, &amp;lsquo;ờ&amp;rsquo;) mà không bị vỡ font.&lt;/li&gt;
&lt;li&gt;Tên class thường kết thúc bằng &lt;code&gt;Reader&lt;/code&gt; (ví dụ: &lt;code&gt;FileReader&lt;/code&gt;) và &lt;code&gt;Writer&lt;/code&gt; (ví dụ: &lt;code&gt;FileWriter&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Nguyên tắc vàng:&lt;/strong&gt; Nếu bạn làm việc với file text (.txt, .md, .html, .java&amp;hellip;), hãy dùng &lt;strong&gt;Character Streams&lt;/strong&gt;. Nếu làm việc với các loại file khác (ảnh, video, mạng&amp;hellip;), hãy dùng &lt;strong&gt;Byte Streams&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;sức-mạnh-của-ống-nối-ống-decorator-pattern&#34;&gt;Sức mạnh của &amp;ldquo;Ống Nối Ống&amp;rdquo; (Decorator Pattern)
&lt;/h2&gt;&lt;p&gt;Điều hay nhất của Java I/O là bạn có thể &amp;ldquo;lắp ráp&amp;rdquo; các đường ống lại với nhau. Bạn có một cái ống &lt;code&gt;FileInputStream&lt;/code&gt; (đọc file) cơ bản, nhưng nó đọc rất chậm (đọc từng byte một).&lt;/p&gt;
&lt;p&gt;Bạn có thể &amp;ldquo;bọc&amp;rdquo; nó bằng một cái ống &amp;ldquo;tăng áp&amp;rdquo; gọi là &lt;code&gt;BufferedInputStream&lt;/code&gt;. Cái ống &amp;ldquo;tăng áp&amp;rdquo; này sẽ đọc một lượng lớn dữ liệu từ file vào bộ đệm (buffer), và sau đó chương trình của bạn chỉ cần lấy từ bộ đệm, nhanh hơn gấp nhiều lần.&lt;/p&gt;
&lt;h3 id=&#34;ví-dụ-1-ghi-và-đọc-file-cách-cơ-bản---character-stream&#34;&gt;Ví dụ 1: Ghi và Đọc file (Cách cơ bản - Character Stream)
&lt;/h3&gt;&lt;p&gt;Chúng ta sẽ dùng &lt;code&gt;FileWriter&lt;/code&gt; và &lt;code&gt;FileReader&lt;/code&gt; để ghi và đọc lại một file text.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.io.FileWriter;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.io.FileReader;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.io.IOException;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BasicFileDemo&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        String filename &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;demo.txt&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        String content &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Đây là nội dung ghi vào file.\nJava I/O thật tuyệt!&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// --- BƯỚC 1: GHI FILE (WRITE) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; (FileWriter writer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; FileWriter(filename)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            writer.&lt;span style=&#34;color:#a6e22e&#34;&gt;write&lt;/span&gt;(content);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Đã ghi file thành công!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (IOException e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Lỗi khi ghi file: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; e.&lt;span style=&#34;color:#a6e22e&#34;&gt;getMessage&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;--- BƯỚC 2: ĐỌC FILE (READ) ---&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; (FileReader reader &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; FileReader(filename)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; character; &lt;span style=&#34;color:#75715e&#34;&gt;// Biến để giữ từng ký tự (dưới dạng số int)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Nội dung file:&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// reader.read() sẽ đọc từng ký tự một&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// Nó trả về -1 khi hết file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; ((character &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; reader.&lt;span style=&#34;color:#a6e22e&#34;&gt;read&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;1) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;// Ép kiểu int về char để hiển thị&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;((&lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;) character);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (IOException e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Lỗi khi đọc file: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; e.&lt;span style=&#34;color:#a6e22e&#34;&gt;getMessage&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        
    </channel>
</rss>
