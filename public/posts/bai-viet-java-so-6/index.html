<!DOCTYPE html>
<html lang="vi-vn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Trong thế giới mạng, TCP giống như một cuộc gọi điện thoại được đảm bảo: bạn phải quay số, chờ người kia nhấc máy, nói chuyện và đảm bảo từng lời được nghe đúng. Ngược lại, UDP (User Datagram Protocol) giống như việc bạn viết thông tin lên một loạt bưu thiếp và thả vào hòm thư 📮.\nĐặc điểm chính của UDP:\nKhông Kết Nối (Connectionless): Không cần &ldquo;bắt tay&rdquo; (handshake). Bên gửi chỉ cần biết địa chỉ IP và cổng của bên nhận, đóng gói dữ liệu vào một &ldquo;bưu thiếp&rdquo; (DatagramPacket) và &ldquo;ném&rdquo; nó vào mạng. Bên nhận chỉ cần &ldquo;mở hòm thư&rdquo; (DatagramSocket) ở cổng đó và chờ thư đến. Không Đáng Tin Cậy (Unreliable): Internet (bưu điện) không đảm bảo bưu thiếp sẽ đến đích. Nó có thể bị thất lạc, bị hỏng trên đường đi, hoặc đến nơi nhưng bị hỏng (checksum error). UDP không tự động gửi lại. Nếu cần độ tin cậy, ứng dụng tầng trên (ví dụ: game của bạn) phải tự xử lý. Không Theo Thứ Tự (Out-of-Order Delivery): Bạn gửi 3 bưu thiếp 1, 2, 3. Người nhận có thể nhận được theo thứ tự 3, 1, 2 hoặc chỉ nhận được 1 và 3. UDP không đảm bảo thứ tự. Nhẹ và Nhanh (Lightweight &amp; Fast): Chính vì bỏ qua các cơ chế đảm bảo của TCP (handshake, sequence number, acknowledgement, retransmission), UDP có phần header rất nhỏ và xử lý rất nhanh. Nó không gây thêm độ trễ (latency) không cần thiết. Khi nào nên dùng UDP? Khi tốc độ quan trọng hơn độ tin cậy tuyệt đối, và ứng dụng có thể chấp nhận hoặc tự xử lý việc mất mát/sai thứ tự gói tin.\n">
<title>Socket UDP - Gửi Dữ Liệu Tốc Hành, Không Cần &#39;Bắt Tay&#39;</title>

<link rel='canonical' href='http://localhost:1313/posts/bai-viet-java-so-6/'>

<link rel="stylesheet" href="/scss/style.min.b1a5b48e9268da293f0e82d09fd1299e5ecbd5ea47ba1f408b3687d520ce0c2b.css"><meta property='og:title' content="Socket UDP - Gửi Dữ Liệu Tốc Hành, Không Cần 'Bắt Tay'">
<meta property='og:description' content="Trong thế giới mạng, TCP giống như một cuộc gọi điện thoại được đảm bảo: bạn phải quay số, chờ người kia nhấc máy, nói chuyện và đảm bảo từng lời được nghe đúng. Ngược lại, UDP (User Datagram Protocol) giống như việc bạn viết thông tin lên một loạt bưu thiếp và thả vào hòm thư 📮.\nĐặc điểm chính của UDP:\nKhông Kết Nối (Connectionless): Không cần &ldquo;bắt tay&rdquo; (handshake). Bên gửi chỉ cần biết địa chỉ IP và cổng của bên nhận, đóng gói dữ liệu vào một &ldquo;bưu thiếp&rdquo; (DatagramPacket) và &ldquo;ném&rdquo; nó vào mạng. Bên nhận chỉ cần &ldquo;mở hòm thư&rdquo; (DatagramSocket) ở cổng đó và chờ thư đến. Không Đáng Tin Cậy (Unreliable): Internet (bưu điện) không đảm bảo bưu thiếp sẽ đến đích. Nó có thể bị thất lạc, bị hỏng trên đường đi, hoặc đến nơi nhưng bị hỏng (checksum error). UDP không tự động gửi lại. Nếu cần độ tin cậy, ứng dụng tầng trên (ví dụ: game của bạn) phải tự xử lý. Không Theo Thứ Tự (Out-of-Order Delivery): Bạn gửi 3 bưu thiếp 1, 2, 3. Người nhận có thể nhận được theo thứ tự 3, 1, 2 hoặc chỉ nhận được 1 và 3. UDP không đảm bảo thứ tự. Nhẹ và Nhanh (Lightweight &amp; Fast): Chính vì bỏ qua các cơ chế đảm bảo của TCP (handshake, sequence number, acknowledgement, retransmission), UDP có phần header rất nhỏ và xử lý rất nhanh. Nó không gây thêm độ trễ (latency) không cần thiết. Khi nào nên dùng UDP? Khi tốc độ quan trọng hơn độ tin cậy tuyệt đối, và ứng dụng có thể chấp nhận hoặc tự xử lý việc mất mát/sai thứ tự gói tin.\n">
<meta property='og:url' content='http://localhost:1313/posts/bai-viet-java-so-6/'>
<meta property='og:site_name' content='Nguyễn Xuân Tùng'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='Java' /><meta property='article:tag' content='Networking' /><meta property='article:tag' content='Socket' /><meta property='article:tag' content='UDP' /><meta property='article:published_time' content='2025-10-22T15:00:00&#43;07:00'/><meta property='article:modified_time' content='2025-10-22T15:00:00&#43;07:00'/><meta property='og:image' content='http://localhost:1313/posts/bai-viet-java-so-6/featured-image.jpg' />
<meta name="twitter:title" content="Socket UDP - Gửi Dữ Liệu Tốc Hành, Không Cần 'Bắt Tay'">
<meta name="twitter:description" content="Trong thế giới mạng, TCP giống như một cuộc gọi điện thoại được đảm bảo: bạn phải quay số, chờ người kia nhấc máy, nói chuyện và đảm bảo từng lời được nghe đúng. Ngược lại, UDP (User Datagram Protocol) giống như việc bạn viết thông tin lên một loạt bưu thiếp và thả vào hòm thư 📮.\nĐặc điểm chính của UDP:\nKhông Kết Nối (Connectionless): Không cần &ldquo;bắt tay&rdquo; (handshake). Bên gửi chỉ cần biết địa chỉ IP và cổng của bên nhận, đóng gói dữ liệu vào một &ldquo;bưu thiếp&rdquo; (DatagramPacket) và &ldquo;ném&rdquo; nó vào mạng. Bên nhận chỉ cần &ldquo;mở hòm thư&rdquo; (DatagramSocket) ở cổng đó và chờ thư đến. Không Đáng Tin Cậy (Unreliable): Internet (bưu điện) không đảm bảo bưu thiếp sẽ đến đích. Nó có thể bị thất lạc, bị hỏng trên đường đi, hoặc đến nơi nhưng bị hỏng (checksum error). UDP không tự động gửi lại. Nếu cần độ tin cậy, ứng dụng tầng trên (ví dụ: game của bạn) phải tự xử lý. Không Theo Thứ Tự (Out-of-Order Delivery): Bạn gửi 3 bưu thiếp 1, 2, 3. Người nhận có thể nhận được theo thứ tự 3, 1, 2 hoặc chỉ nhận được 1 và 3. UDP không đảm bảo thứ tự. Nhẹ và Nhanh (Lightweight &amp; Fast): Chính vì bỏ qua các cơ chế đảm bảo của TCP (handshake, sequence number, acknowledgement, retransmission), UDP có phần header rất nhỏ và xử lý rất nhanh. Nó không gây thêm độ trễ (latency) không cần thiết. Khi nào nên dùng UDP? Khi tốc độ quan trọng hơn độ tin cậy tuyệt đối, và ứng dụng có thể chấp nhận hoặc tự xử lý việc mất mát/sai thứ tự gói tin.\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://localhost:1313/posts/bai-viet-java-so-6/featured-image.jpg' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_ca785c3f2ef7617f.png" width="300"
                            height="411" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🎓</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Nguyễn Xuân Tùng</a></h1>
            <h2 class="site-description">Blog chia sẻ kiến thức lập trình</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/posts/' >
                
                
                
                <span>Bài viết</span>
            </a>
        </li>
        
        
        <li >
            <a href='/profile/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>Profile</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#thành-phần-chính-datagramsocket-và-datagrampacket">Thành Phần Chính: <code>DatagramSocket</code> và <code>DatagramPacket</code></a></li>
        <li><a href="#1-udpechoserverjava---người-nhận-và-phản-hồi-bưu-thiếp-">1. <code>UDPEchoServer.java</code> - Người Nhận và Phản Hồi Bưu Thiếp 📬</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/posts/bai-viet-java-so-6/">
                <img src="/posts/bai-viet-java-so-6/featured-image_hu_d94d93c668b12967.jpg"
                        srcset="/posts/bai-viet-java-so-6/featured-image_hu_d94d93c668b12967.jpg 800w, /posts/bai-viet-java-so-6/featured-image_hu_44ad8099e1d66b3f.jpg 1600w"
                        width="800" 
                        height="450" 
                        loading="lazy"
                        alt="Featured image of post Socket UDP - Gửi Dữ Liệu Tốc Hành, Không Cần &#39;Bắt Tay&#39;" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/networking/" >
                Networking
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/bai-viet-java-so-6/">Socket UDP - Gửi Dữ Liệu Tốc Hành, Không Cần &#39;Bắt Tay&#39;</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 22, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    4 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>Trong thế giới mạng, TCP giống như một cuộc gọi điện thoại được đảm bảo: bạn phải quay số, chờ người kia nhấc máy, nói chuyện và đảm bảo từng lời được nghe đúng. Ngược lại, <strong>UDP (User Datagram Protocol)</strong> giống như việc bạn <strong>viết thông tin lên một loạt bưu thiếp và thả vào hòm thư</strong> 📮.</p>
<p>Đặc điểm chính của UDP:</p>
<ol>
<li><strong>Không Kết Nối (Connectionless):</strong> Không cần &ldquo;bắt tay&rdquo; (handshake). Bên gửi chỉ cần biết địa chỉ IP và cổng của bên nhận, đóng gói dữ liệu vào một &ldquo;bưu thiếp&rdquo; (<code>DatagramPacket</code>) và &ldquo;ném&rdquo; nó vào mạng. Bên nhận chỉ cần &ldquo;mở hòm thư&rdquo; (<code>DatagramSocket</code>) ở cổng đó và chờ thư đến.</li>
<li><strong>Không Đáng Tin Cậy (Unreliable):</strong> Internet (bưu điện) <strong>không đảm bảo</strong> bưu thiếp sẽ đến đích. Nó có thể bị thất lạc, bị hỏng trên đường đi, hoặc đến nơi nhưng bị hỏng (checksum error). UDP không tự động gửi lại. Nếu cần độ tin cậy, ứng dụng tầng trên (ví dụ: game của bạn) phải tự xử lý.</li>
<li><strong>Không Theo Thứ Tự (Out-of-Order Delivery):</strong> Bạn gửi 3 bưu thiếp 1, 2, 3. Người nhận có thể nhận được theo thứ tự 3, 1, 2 hoặc chỉ nhận được 1 và 3. UDP không đảm bảo thứ tự.</li>
<li><strong>Nhẹ và Nhanh (Lightweight &amp; Fast):</strong> Chính vì bỏ qua các cơ chế đảm bảo của TCP (handshake, sequence number, acknowledgement, retransmission), UDP có phần header rất nhỏ và xử lý rất nhanh. Nó không gây thêm độ trễ (latency) không cần thiết.</li>
</ol>
<p><strong>Khi nào nên dùng UDP?</strong>
Khi <strong>tốc độ</strong> quan trọng hơn <strong>độ tin cậy tuyệt đối</strong>, và ứng dụng có thể chấp nhận hoặc tự xử lý việc mất mát/sai thứ tự gói tin.</p>
<ul>
<li><strong>Game thời gian thực (Real-time Gaming):</strong> Gửi vị trí người chơi. Mất một gói tin vị trí cũ không quá tệ, miễn là các vị trí mới đến nhanh.</li>
<li><strong>Truyền phát Video/Audio (Streaming - VoIP, IPTV):</strong> Mất một vài khung hình/mẫu âm thanh thường ít ảnh hưởng hơn là bị giật/lag do chờ gói tin bị mất của TCP.</li>
<li><strong>DNS (Domain Name System):</strong> Yêu cầu phân giải tên miền cần phản hồi nhanh nhất có thể.</li>
<li><strong>DHCP (Dynamic Host Configuration Protocol):</strong> Cấp phát địa chỉ IP trong mạng LAN.</li>
</ul>
<h3 id="thành-phần-chính-datagramsocket-và-datagrampacket">Thành Phần Chính: <code>DatagramSocket</code> và <code>DatagramPacket</code>
</h3><p>Thay vì <code>Socket</code> và <code>Stream</code> của TCP, UDP dùng:</p>
<ul>
<li><code>java.net.DatagramSocket</code>: Đại diện cho &ldquo;hòm thư&rdquo; tại một cổng (port) cụ thể trên máy bạn. Nó dùng để <strong>gửi</strong> và <strong>nhận</strong> các <code>DatagramPacket</code>.</li>
<li><code>java.net.DatagramPacket</code>: Chính là &ldquo;tấm bưu thiếp&rdquo;. Nó là một gói dữ liệu chứa:
<ul>
<li>Mảng byte dữ liệu (<code>byte[] data</code>).</li>
<li>Độ dài dữ liệu (<code>int length</code>).</li>
<li>Địa chỉ IP của người nhận/người gửi (<code>InetAddress address</code>).</li>
<li>Cổng của người nhận/người gửi (<code>int port</code>).</li>
</ul>
</li>
</ul>
<h3 id="1-udpechoserverjava---người-nhận-và-phản-hồi-bưu-thiếp-">1. <code>UDPEchoServer.java</code> - Người Nhận và Phản Hồi Bưu Thiếp 📬
</h3><p>Server tạo <code>DatagramSocket</code> để lắng nghe trên một cổng cố định.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.DatagramSocket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.DatagramPacket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.InetAddress</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UDPEchoServer</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">9876</span><span class="p">;</span><span class="w"> </span><span class="c1">// Cổng lắng nghe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1024</span><span class="p">;</span><span class="w"> </span><span class="c1">// Kích thước tối đa của một bưu thiếp nhận</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">DatagramSocket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// 1. Tạo DatagramSocket để lắng nghe trên PORT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramSocket</span><span class="p">(</span><span class="n">PORT</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;UDP Echo Server đang lắng nghe trên cổng &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PORT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;...&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">receiveBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="n">BUFFER_SIZE</span><span class="o">]</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// Vòng lặp vô hạn để phục vụ nhiều client (nhưng vẫn đơn tuyến)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 2. Tạo DatagramPacket rỗng để chuẩn bị nhận dữ liệu</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// Packet này sẽ được điền thông tin (dữ liệu, IP, port người gửi) khi nhận</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">DatagramPacket</span><span class="w"> </span><span class="n">receivePacket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramPacket</span><span class="p">(</span><span class="n">receiveBuffer</span><span class="p">,</span><span class="w"> </span><span class="n">receiveBuffer</span><span class="p">.</span><span class="na">length</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 3. Chờ nhận Packet (blocking call)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// Chương trình sẽ dừng ở đây cho đến khi có packet đến</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">socket</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="n">receivePacket</span><span class="p">);</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 4. Xử lý Packet nhận được</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">InetAddress</span><span class="w"> </span><span class="n">clientAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">receivePacket</span><span class="p">.</span><span class="na">getAddress</span><span class="p">();</span><span class="w"> </span><span class="c1">// Lấy IP người gửi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">clientPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">receivePacket</span><span class="p">.</span><span class="na">getPort</span><span class="p">();</span><span class="w">            </span><span class="c1">// Lấy Port người gửi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// Lấy dữ liệu, chỉ lấy đúng phần có nội dung (getLength)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">clientMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">receivePacket</span><span class="p">.</span><span class="na">getData</span><span class="p">(),</span><span class="w"> </span><span class="n">0</span><span class="p">,</span><span class="w"> </span><span class="n">receivePacket</span><span class="p">.</span><span class="na">getLength</span><span class="p">());</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">                
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Nhận từ [&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">clientAddress</span><span class="p">.</span><span class="na">getHostAddress</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">clientPort</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;]: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">clientMessage</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 5. Chuẩn bị Packet để gửi phản hồi (echo)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">sendBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clientMessage</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">().</span><span class="na">getBytes</span><span class="p">();</span><span class="w"> </span><span class="c1">// Chuyển thành chữ hoa rồi gửi lại</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// Tạo Packet gửi đi, chỉ rõ địa chỉ và port của Client đã gửi đến</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">DatagramPacket</span><span class="w"> </span><span class="n">sendPacket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramPacket</span><span class="p">(</span><span class="n">sendBuffer</span><span class="p">,</span><span class="w"> </span><span class="n">sendBuffer</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">clientAddress</span><span class="p">,</span><span class="w"> </span><span class="n">clientPort</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 6. Gửi Packet phản hồi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">socket</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">sendPacket</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;   -&gt; Đã gửi phản hồi echo (chữ hoa)&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// Reset buffer nhận cho lần lặp sau (không bắt buộc nhưng nên làm)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// receiveBuffer = new byte[BUFFER_SIZE]; // Hoặc dùng Arrays.fill</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Lỗi Server UDP: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">socket</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">socket</span><span class="p">.</span><span class="na">isClosed</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">socket</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Server UDP đã đóng.&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/java/">Java</a>
        
            <a href="/tags/networking/">Networking</a>
        
            <a href="/tags/socket/">Socket</a>
        
            <a href="/tags/udp/">UDP</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/posts/bai-viet-java-so-5/">
        
        
            <div class="article-image">
                <img src="/posts/bai-viet-java-so-5/featured-image.e601ca173e8647160c8e18d1b3684fe0_hu_a0b1011d355e483e.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Socket TCP - Thiết Lập Đường Dây Nóng Hai Chiều"
                        
                        data-hash="md5-5gHKFz6GRxYMjhjRs2hP4A==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Socket TCP - Thiết Lập Đường Dây Nóng Hai Chiều</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/bai-viet-java-so-4/">
        
        
            <div class="article-image">
                <img src="/posts/bai-viet-java-so-4/featured-image.a25a8d21318295f664ca58837fb34dae_hu_2043ed250d79c08e.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Ba Chàng Ngự Lâm Mạng Java (InetAddress, URL, URLConnection)"
                        
                        data-hash="md5-olqNITGClfZkyliDf7NNrg==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Ba Chàng Ngự Lâm Mạng Java (InetAddress, URL, URLConnection)</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/bai-viet-java-so-3/">
        
        
            <div class="article-image">
                <img src="/posts/bai-viet-java-so-3/featured-image.fea647e53fff54dbabf7635879ab3921_hu_d3616e880a2ecd30.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Đa Tuyến (Multithreading) - Biến Hóa Phân Thân, Xử Lý Song Song"
                        
                        data-hash="md5-/qZH5T//VNur92NYeas5IQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Đa Tuyến (Multithreading) - Biến Hóa Phân Thân, Xử Lý Song Song</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/bai-viet-java-so-2/">
        
        
            <div class="article-image">
                <img src="/posts/bai-viet-java-so-2/featured-image.f632b4c2c36b20931bc97049ff437165_hu_7e99a16e26866c7a.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Luồng (Stream) trong Java - Đường Ống Dẫn Dữ Liệu Tinh Tế"
                        
                        data-hash="md5-9jK0wsNrIJMbyXBJ/0NxZQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Luồng (Stream) trong Java - Đường Ống Dẫn Dữ Liệu Tinh Tế</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/bai-viet-java-so-1/">
        
        
            <div class="article-image">
                <img src="/posts/bai-viet-java-so-1/featured-image.b86c29fc254f92f48b41f28691e6b00f_hu_bfa89dfd59b2d762.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Gã Khổng Lồ &#39;Write Once, Run Anywhere&#39;"
                        
                        data-hash="md5-uGwp/CVPkvSLQfKGkeawDw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Gã Khổng Lồ &#39;Write Once, Run Anywhere&#39;</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 Nguyễn Xuân Tùng
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.31.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.ecd139d3b4f1dafb5cd9c1037f8896e526e5289c3f29b91a454ca1de9d8f178a.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
